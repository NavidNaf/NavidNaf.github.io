<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Navid Naf | Official Website</title>
<meta name="description" content="Academic portfolio showcasing research, publications, projects, and teaching.">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Asap+Condensed:wght@400;500;600;700&family=Asap:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<!-- Font Awesome for icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" referrerpolicy="no-referrer" />

<link rel="stylesheet" href="/styles.css">
</head>
<body class="seminars-page">
<a class="skip-link" href="#main">Skip to content</a>

<header class="site-header">
  <div class="container header-grid">
    <a class="brand" href="/" aria-label="Navid Naf - Home">
      <img src="images/navid black-02.png" alt="Navid Naf" class="brand-logo">
    </a>
    <nav id="site-nav" class="site-nav" aria-label="Primary">
      <ul>
        <li><a href="#research-interests">Research</a></li>
        <li><a href="#education">Education</a></li>
        <li><a href="#awards">Work</a></li>
        <li><a href="#news">Explore More</a></li>
      </ul>
    </nav>
    <button class="nav-toggle" aria-expanded="false" aria-controls="site-nav">
      <span class="nav-toggle-bar"></span>
      <span class="nav-toggle-bar"></span>
      <span class="nav-toggle-bar"></span>
      <span class="sr-only">Toggle navigation</span>
    </button>
  </div>
  <div class="accent-bar" aria-hidden="true"></div>
</header>

<main id="main" class="site-main">
  <div class="container">
    <section class="project-intro">
        <h2 class="intro-title">üí¨ Conversations</h2>
        <p class="intro-text">
          Welcome to Conversations, a collection of my <strong>talks</strong>, <strong>seminars</strong>, <strong>workshops</strong>, and <strong>public newsletters</strong>, capturing key ideas and discussions from my journey of <strong>learning</strong>, <strong>teaching</strong>, and <strong>sharing insights</strong> across audiences.
        </p>
    </section>

    <!-- Socials -->
    <section class="socials-section" aria-label="Socials">
      <div class="socials-grid">
        <a class="social-card social-facebook" href="https://www.facebook.com/NavidSec/" target="_blank" rel="noopener noreferrer">
          <div class="social-icon"><i class="fa-brands fa-facebook-f" aria-hidden="true"></i></div>
          <div class="social-content">
            <div class="social-label">Follow For</div>
            <div class="social-text">Content in Bengali and English, with a light touch on important topics, designed for a broad audience.</div>
            <div class="social-insights" aria-label="Facebook insights">
              <span class="social-insight-stat">
                <span class="social-insight-value">1.1k+</span>
                <span class="social-insight-label">Followers</span>
              </span>
              <span class="social-insight-stat">
                <span class="social-insight-value">157k+</span>
                <span class="social-insight-label">Views</span>
              </span>
              <span class="social-insight-stat">
                <span class="social-insight-value">5k+</span>
                <span class="social-insight-label">Interactions</span>
              </span>
            </div>
            <div class="social-insights-note">Stats for the Last 12 Months</div>
          </div>
        </a>
        <a class="social-card social-linkedin" href="https://www.linkedin.com/in/navid-f-rabbi/" target="_blank" rel="noopener noreferrer">
          <div class="social-icon"><i class="fa-brands fa-linkedin-in" aria-hidden="true"></i></div>
          <div class="social-content">
            <div class="social-label">Follow For</div>
            <div class="social-text">In-depth engagement with focused discussions, direct communication, and close collaboration with the community.</div>
            <div class="social-insights" aria-label="LinkedIn insights">
              <span class="social-insight-stat">
                <span class="social-insight-value">3.7k+</span>
                <span class="social-insight-label">Followers</span>
              </span>
              <span class="social-insight-stat">
                <span class="social-insight-value">484k+</span>
                <span class="social-insight-label">Impressions</span>
              </span>
              <span class="social-insight-stat">
                <span class="social-insight-value">8.5k+</span>
                <span class="social-insight-label">Engagements</span>
              </span>
            </div>
            <div class="social-insights-note">Stats for the Last 12 Months</div>
          </div>
        </a>
      </div>
    </section>

    <!-- Newsletter Section -->
    <section class="newsletter-section">
      <h2>Public Newsletter</h2>
      <div class="newsletter-grid">
        <div class="newsletter-item">
          <a href="https://www.linkedin.com/newsletters/cyber-spectrum-7148921226483150849/" target="_blank" rel="noopener noreferrer" class="newsletter-link">
            <img src="images/newsletter/cyberspectrum.png" alt="Cyber Spectrum Newsletter" class="newsletter-image">
            <div class="newsletter-caption">
              <div class="newsletter-title">Cyber Spectrum</div>
              <div class="newsletter-subtitle">Beginner-friendly cybersecurity fundamentals for newcomers.</div>
            </div>
          </a>
        </div>
        <div class="newsletter-item">
          <a href="https://www.linkedin.com/newsletters/oversight-%E0%A6%93%E0%A6%AD%E0%A6%BE%E0%A6%B0%E0%A6%B8%E0%A6%BE%E0%A6%87%E0%A6%9F-7314673618234363904/" target="_blank" rel="noopener noreferrer" class="newsletter-link">
            <img src="images/newsletter/oversight.png" alt="Oversight Newsletter" class="newsletter-image">
            <div class="newsletter-caption">
              <div class="newsletter-title">Oversight</div>
              <div class="newsletter-subtitle">Insights on economic, tech, and cybersecurity policy.</div>
            </div>
          </a>
        </div>
        <div class="newsletter-item">
          <a href="https://www.linkedin.com/newsletters/edgecase-7334958653042475009/" target="_blank" rel="noopener noreferrer" class="newsletter-link">
            <img src="images/newsletter/edgecase.png" alt="Edgecase Newsletter" class="newsletter-image">
            <div class="newsletter-caption">
              <div class="newsletter-title">Edgecase</div>
              <div class="newsletter-subtitle">Practical security deep dives and real-world solutions.</div>
            </div>
          </a>
        </div>
      </div>
    </section>

    <!-- Avengers Assemble Section -->
    <section class="avengers-section">
      <h2>üí• Avengers Assemble</h2>
      <div id="avengers-dashboard" class="avengers-dashboard" aria-label="Events overview"></div>
      <div class="avengers-grid" id="avengers-container">
        <!-- Tiles will be loaded dynamically -->
      </div>
      <div id="avengers-pagination" class="projects-pagination" aria-label="Pagination"></div>
    </section>

  </div>

  <section class="section" id="secure-meet" aria-labelledby="secure-meet-title">
    <div class="container">
      <h2 id="secure-meet-title" style="text-align:center">üîê Secure Meet with Navid</h2>
      <!-- Calendly inline widget begin -->
      <div class="calendly-inline-widget" data-url="https://calendly.com/navid-cs/secure-meet" style="min-width:320px;height:700px;"></div>
      <script type="text/javascript" src="https://assets.calendly.com/assets/external/widget.js" async></script>
      <!-- Calendly inline widget end -->
    </div>
  </section>

</main>

<footer class="site-footer">
  <div class="container footer-grid">
    <p> <span id="year"></span> Navid Naf</p>
    <nav aria-label="Footer">
      <a href="#research-interests">Research</a>
      <a href="#education">Education</a>
      <a href="#awards">Work</a>
      <a href="#news">Explore More</a>
    </nav>
    
  </div>
</footer>

<!-- Simple Image Viewer Overlay -->
<div id="img-viewer" class="img-viewer-overlay" hidden aria-modal="true" role="dialog" aria-label="Image viewer">
  <button class="img-viewer-close" aria-label="Close">√ó</button>
  <img class="img-viewer-img" alt="Full size preview">
  <div class="img-viewer-backdrop" aria-hidden="true"></div>

  <!-- Optional: click hint on desktop -->
  <span class="img-viewer-hint" aria-hidden="true">Click outside or press Esc to close</span>

  <!-- Blur-free, crisp scaling ensured via CSS; image will never upscale beyond viewport -->
</div>

<script>
// Load Avengers Assemble data from Google Sheets CSV
async function loadAvengersData() {
  const csvUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSy7KOHp3XydAoFfgDgDgmJWe08EUVDH8e0WssmesMZ0vLDt43mEWcYwnRQuBJIs2HTXP6ZbXzRlVYg/pub?gid=0&single=true&output=csv';
  const container = document.getElementById('avengers-container');
  const dashboard = document.getElementById('avengers-dashboard');

  console.log('üîç Starting to load Avengers data from:', csvUrl);

  try {
    console.log('üåê Attempting to fetch CSV data...');
    const response = await fetch(csvUrl, {
      mode: 'cors',
      headers: {
        'Accept': 'text/csv,application/csv,text/plain,*/*'
      }
    });

    console.log('üìä Response status:', response.status);
    console.log('üìã Response type:', response.type);
    console.log('‚úÖ Response ok:', response.ok);

    if (!response.ok) {
      throw new Error(`HTTP ${response.status}: ${response.statusText}`);
    }

    const csvText = await response.text();
    console.log('üìÑ CSV text length:', csvText.length);
    console.log('üìù First 500 characters of CSV:');
    console.log(csvText.substring(0, 500));

    // Parse CSV
    const events = parseAvengersCSV(csvText);
    console.log('üîç Parsed events array length:', events.length);

    if (events.length === 0) {
      throw new Error('CSV appears to be empty or unparseable');
    }

    const headers = events[0];
    console.log('üè∑Ô∏è CSV Headers:', headers);

    const dataRows = events.slice(1).filter(row => row.length > 1 && row[0] && row[0].trim());
    console.log('üìã Data rows after filtering:', dataRows.length);

    if (dataRows.length === 0) {
      console.log('‚ö†Ô∏è No valid data rows found');
      container.innerHTML = `
        <div style="grid-column: 1 / -1; text-align: center; color: var(--gray-500); padding: 3rem;">
          <p><strong>No events data found</strong></p>
          <p style="font-size: 0.9rem; margin-top: 1rem;">
            Expected format: Type | Topic | Venue | Description | Keywords | Date | Write-up URL | Slides URL | Recording URL
          </p>
        </div>
      `;
      if (dashboard) dashboard.innerHTML = '';
      return;
    }

    console.log('üèóÔ∏è Creating tiles for', dataRows.length, 'events');
    renderAvengersDashboard(dataRows);

    // Create tiles
    dataRows.forEach((event, index) => {
      console.log(`üî® Creating tile ${index + 1}:`, event);
      try {
        const tile = createAvengerTile(event, headers);
        container.appendChild(tile);
        console.log(`‚úÖ Tile ${index + 1} created successfully`);
      } catch (tileError) {
        console.error(`‚ùå Error creating tile ${index + 1}:`, tileError, 'Data:', event);
      }
    });

    console.log('üéâ Avengers data loading completed successfully!');

  } catch (error) {
    console.error('üí• Error loading Avengers data:', error);
    console.error('üîç Error details:', {
      message: error.message,
      stack: error.stack,
      name: error.name,
      url: csvUrl
    });

    // Show error message
    container.innerHTML = `
      <div style="grid-column: 1 / -1; text-align: center; color: var(--gray-500); padding: 3rem; background: rgba(255,255,255,0.8); border-radius: 1rem; margin: 1rem;">
        <h3 style="color: var(--gray-700); margin-bottom: 1rem;">Unable to Load Events</h3>
        <p style="margin-bottom: 1rem;"><strong>Error:</strong> ${error.message}</p>
        <p style="font-size: 0.9rem; margin-bottom: 1rem;">
          <strong>Possible solutions:</strong><br>
          ‚Ä¢ Check if Google Sheet is published to web<br>
          ‚Ä¢ Verify the sheet contains data<br>
          ‚Ä¢ Ensure correct CSV format
        </p>
        <p style="font-size: 0.8rem; color: var(--gray-500);">
          Check browser console for detailed logs
        </p>
      </div>
    `;
    if (dashboard) dashboard.innerHTML = '';
  }
}

function parseAvengersCSV(csvText) {
  const lines = csvText.split('\n');
  const result = [];

  for (let i = 0; i < lines.length; i++) {
    const line = lines[i].trim();
    if (line === '') continue; // Skip empty lines

    const row = [];
    let current = '';
    let inQuotes = false;
    let j = 0;

    while (j < line.length) {
      const char = line[j];
      const nextChar = line[j + 1];

      if (char === '"') {
        if (inQuotes && nextChar === '"') {
          // Escaped quote
          current += '"';
          j += 2;
        } else {
          // Toggle quote state
          inQuotes = !inQuotes;
          j++;
        }
      } else if (char === ',' && !inQuotes) {
        // Field separator
        row.push(current.trim());
        current = '';
        j++;
      } else {
        current += char;
        j++;
      }
    }

    // Add the last field
    row.push(current.trim());
    result.push(row);
  }

  return result;
}

function createAvengerTile(event, headers) {
  const tile = document.createElement('div');
  tile.className = 'avenger-tile';

  // Extract data from CSV row
  const type = (event[0] && event[0].trim()) ? event[0].trim() : '';
  const topic = (event[1] && event[1].trim()) ? event[1].trim() : '';
  const venue = (event[2] && event[2].trim()) ? event[2].trim() : '';
  const description = (event[3] && event[3].trim()) ? event[3].trim() : '';
  const keywordsText = (event[4] && event[4].trim()) ? event[4].trim() : '';
  const date = (event[5] && event[5].trim()) ? event[5].trim() : '';
  const writeupUrl = (event[6] && event[6].trim()) ? event[6].trim() : '';
  const slidesUrl = (event[7] && event[7].trim()) ? event[7].trim() : '';
  const recordingUrl = (event[8] && event[8].trim()) ? event[8].trim() : '';

  // Split keywords by semicolon
  const keywords = keywordsText ? keywordsText.split(';').map(kw => kw.trim()).filter(kw => kw.length > 0) : [];

  const typeIconClass = (() => {
    const key = type.toLowerCase();
    if (key.includes('workshop')) return 'fa-solid fa-gear';
    if (key.includes('seminar')) return 'fa-solid fa-graduation-cap';
    if (key.includes('talk')) return 'fa-solid fa-microphone-lines';
    if (key.includes('panel')) return 'fa-solid fa-people-group';
    if (key.includes('tutorial')) return 'fa-solid fa-chalkboard';
    if (key.includes('webinar')) return 'fa-solid fa-video';
    if (key.includes('podcast')) return 'fa-solid fa-podcast';
    if (key.includes('presentation')) return 'fa-solid fa-file-lines';
    if (key.includes('newsletter')) return 'fa-solid fa-newspaper';
    return 'fa-solid fa-bolt';
  })();
  const typeColor = (() => {
    const key = type.toLowerCase();
    if (key.includes('workshop')) return '#f59e0b';
    if (key.includes('seminar')) return '#3b82f6';
    if (key.includes('talk')) return '#22c55e';
    if (key.includes('panel')) return '#8b5cf6';
    if (key.includes('tutorial')) return '#14b8a6';
    if (key.includes('webinar')) return '#0ea5e9';
    if (key.includes('podcast')) return '#ec4899';
    if (key.includes('presentation')) return '#f97316';
    if (key.includes('newsletter')) return '#ef4444';
    return 'var(--carolina-blue)';
  })();

  const d = Date.parse(date);
  const dt = Number.isNaN(d) ? null : new Date(d);
  const month = dt ? dt.toLocaleString('en-US', { month: 'short' }).toUpperCase() : '';
  const day = dt ? String(dt.getDate()).padStart(2, '0') : '';
  const year = dt ? dt.getFullYear() : date;
  const monthIdx = dt ? dt.getMonth() : null;

  const monthClass = monthIdx !== null ? `month-${monthIdx + 1}` : '';

  tile.innerHTML = `
    <div class="avenger-row">
      <div class="avenger-datebox ${monthClass}">
        <div class="avenger-month">${month || 'DATE'}</div>
        <div class="avenger-day">${day || ''}</div>
        <div class="avenger-year">${year || ''}</div>
      </div>
      <div class="avenger-main">
        <div class="avenger-type" style="--type-color:${typeColor};"><span class="type-dot"></span><i class="${typeIconClass}" aria-hidden="true"></i> ${type}</div>
        <h3 class="avenger-topic">${topic}</h3>
        <div class="avenger-venue">${venue}</div>
        <div class="avenger-description">${description}</div>
        ${keywords.length > 0 ? `<div class="keywords-container">${keywords.map(kw => `<span class="keyword-tag">${kw}</span>`).join('')}</div>` : ''}
      </div>
      <div class="avenger-actions">
        ${writeupUrl ? `<a href="${writeupUrl}" target="_blank" rel="noopener noreferrer" class="avenger-action" aria-label="Detailed writeup">
          <i class="fa-solid fa-file-lines" aria-hidden="true"></i>
        </a>` : ''}
        ${slidesUrl ? `<a href="${slidesUrl}" target="_blank" rel="noopener noreferrer" class="avenger-action" aria-label="Slide deck">
          <i class="fa-solid fa-file-powerpoint" aria-hidden="true"></i>
        </a>` : ''}
        ${recordingUrl ? `<a href="${recordingUrl}" target="_blank" rel="noopener noreferrer" class="avenger-action" aria-label="Recording">
          <i class="fa-solid fa-video" aria-hidden="true"></i>
        </a>` : ''}
      </div>
    </div>
  `;

  return tile;
}

function renderAvengersDashboard(rows) {
  const dashboard = document.getElementById('avengers-dashboard');
  if (!dashboard) return;

  const total = rows.length;
  const typeCounts = new Map();
  const monthCounts = Array.from({ length: 12 }, () => 0);

  rows.forEach(row => {
    const type = (row[0] || '').trim() || 'Other';
    typeCounts.set(type, (typeCounts.get(type) || 0) + 1);

    const dateStr = (row[5] || '').trim();
    const d = Date.parse(dateStr);
    if (!Number.isNaN(d)) {
      const m = new Date(d).getMonth();
      monthCounts[m] += 1;
    }
  });

  const totalTypes = Array.from(typeCounts.values()).reduce((sum, v) => sum + v, 0) || 1;
  const topTypes = Array.from(typeCounts.entries())
    .sort((a, b) => b[1] - a[1])
    .slice(0, 5);

  const maxMonth = Math.max(1, ...monthCounts);
  const monthColors = [
    '#ef4444', '#f97316', '#eab308', '#22c55e', '#14b8a6', '#38bdf8',
    '#3b82f6', '#6366f1', '#8b5cf6', '#a855f7', '#ec4899', '#f43f5e'
  ];

  const typeIcon = (label) => {
    const key = String(label || '').toLowerCase();
    if (key.includes('workshop')) return 'fa-solid fa-gear';
    if (key.includes('seminar')) return 'fa-solid fa-graduation-cap';
    if (key.includes('talk')) return 'fa-solid fa-microphone-lines';
    if (key.includes('panel')) return 'fa-solid fa-people-group';
    if (key.includes('tutorial')) return 'fa-solid fa-chalkboard';
    if (key.includes('webinar')) return 'fa-solid fa-video';
    if (key.includes('podcast')) return 'fa-solid fa-podcast';
    if (key.includes('presentation')) return 'fa-solid fa-file-lines';
    if (key.includes('newsletter')) return 'fa-solid fa-newspaper';
    return 'fa-solid fa-bolt';
  };
  const typeColor = (label) => {
    const key = String(label || '').toLowerCase();
    if (key.includes('workshop')) return '#f59e0b';
    if (key.includes('seminar')) return '#3b82f6';
    if (key.includes('talk')) return '#22c55e';
    if (key.includes('panel')) return '#8b5cf6';
    if (key.includes('tutorial')) return '#14b8a6';
    if (key.includes('webinar')) return '#0ea5e9';
    if (key.includes('podcast')) return '#ec4899';
    if (key.includes('presentation')) return '#f97316';
    if (key.includes('newsletter')) return '#ef4444';
    return 'var(--carolina-blue)';
  };

  dashboard.innerHTML = `
    <div class="dashboard-card avengers-card">
      <div class="dashboard-label">Total Events</div>
      <div class="dashboard-value">${total}</div>
      <img src="images/icons/event.png" alt="" class="dashboard-icon" aria-hidden="true">
      <img src="images/cutout.png" alt="" class="dashboard-cutout" aria-hidden="true">
    </div>
    <div class="dashboard-card avengers-card">
      <div class="dashboard-label">Event Breakdown</div>
      <div class="lang-bars">
        ${topTypes.map(([label, count]) => {
          const pct = Math.round((count / totalTypes) * 1000) / 10;
          const color = typeColor(label);
          const icon = typeIcon(label);
          return `
            <div class="lang-bar-row">
              <div class="lang-bar-head">
                <span class="lang-bar-name"><span class="lang-dot" style="background:${color};"></span><i class="${icon}" aria-hidden="true"></i> ${label}</span>
                <span class="lang-bar-pct">${pct}%</span>
              </div>
              <div class="lang-bar-track">
                <span class="lang-bar-fill" style="width:${pct}%; background: ${color};" data-value="${count} events"></span>
              </div>
            </div>
          `;
        }).join('')}
      </div>
    </div>
    <div class="dashboard-card avengers-card">
      <div class="dashboard-label">Monthly Frequency</div>
      <div class="month-bars">
        ${monthCounts.map((count, idx) => {
          const height = Math.round((count / maxMonth) * 100);
          const label = new Date(2020, idx, 1).toLocaleString('en-US', { month: 'short' });
          const color = monthColors[idx];
          return `
            <div class="month-bar">
              <span class="month-bar-fill" style="height:${height}%; background:${color};" data-value="${count} events"></span>
              <span class="month-bar-label">${label}</span>
            </div>
          `;
        }).join('')}
      </div>
    </div>
  `;
}

// Load Avengers data when page loads
document.addEventListener('DOMContentLoaded', loadAvengersData);

// Simple test to verify JavaScript is running
console.log('üöÄ Seminars page JavaScript loaded successfully!');
console.log('üìÑ Current URL:', window.location.href);
console.log('üïí Page load time:', new Date().toLocaleTimeString());
</script>

<script src="/script.js" defer></script>
</body>
</html>
