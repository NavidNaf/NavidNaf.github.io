<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Navid Naf | Official Website</title>
<meta name="description" content="Academic portfolio showcasing research, publications, projects, and teaching.">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Asap+Condensed:wght@400;500;600;700&family=Asap:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<!-- Font Awesome for icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" referrerpolicy="no-referrer" />

<link rel="stylesheet" href="/styles.css">
</head>
<body class="project-page">
<a class="skip-link" href="#main">Skip to content</a>

<header class="site-header">
  <div class="container header-grid">
    <a class="brand" href="/" aria-label="Navid Naf - Home">
      <img src="images/navid black-02.png" alt="Navid Naf" class="brand-logo">
    </a>
    <nav id="site-nav" class="site-nav" aria-label="Primary">
      <ul>
        <li><a href="#research-interests">Research</a></li>
        <li><a href="#education">Education</a></li>
        <li><a href="#awards">Work</a></li>
        <li><a href="#news">Explore More</a></li>
      </ul>
    </nav>
    <button class="nav-toggle" aria-expanded="false" aria-controls="site-nav">
      <span class="nav-toggle-bar"></span>
      <span class="nav-toggle-bar"></span>
      <span class="nav-toggle-bar"></span>
      <span class="sr-only">Toggle navigation</span>
    </button>
  </div>
  <div class="accent-bar" aria-hidden="true"></div>
</header>

<main id="main" class="site-main">
  <div class="container">
    <!-- Project Introduction -->
    <section class="project-intro">
      <h2 class="intro-title">üìú Scriptorium</h2>
      <p class="intro-text">
        This space is not for <strong>formal research</strong>. It is a playground for <strong>fun projects</strong> and <strong>technologies</strong> I enjoy building. You will find my <strong>projects</strong>, <strong>experiments</strong>, <strong>favorite tools</strong>, and <strong>hacking goodies</strong>, all linked directly to my <strong>GitHub</strong> or <strong>GitBook</strong>.
      </p>
      <p class="intro-text">
        I build or <strong>automate</strong> things whenever something sparks my <strong>curiosity</strong>. I play <strong>CTFs</strong> for fun. Earlier in my industry roles, I focused on <strong>pentesting tools</strong>, <strong>source code analysis</strong>, <strong>code sanitization</strong>, and <strong>automated testing</strong>. My recent projects lean more toward <strong>problem-solving</strong>, <strong>cryptography</strong>, and <strong>building new ideas</strong> from scratch.
      </p>
    </section>

    <!-- Action Boxes -->
    <section class="action-boxes">
      <div class="action-box action-box-github">
        <a href="https://github.com/NavidNaf" target="_blank" rel="noopener noreferrer" class="action-link">
          <div class="action-content">
            <h3>View My GitHub Profile</h3>
            <p>Explore all my projects, repositories, and contributions</p>
          </div>
        </a>
      </div>
      <div class="action-box action-box-pentest">
        <a href="https://security.navidnaf.com" target="_blank" rel="noopener noreferrer" class="action-link">
          <div class="action-content">
            <h3>See My Pentesting Dark Arts</h3>
            <p>Discover security tools, CTF write-ups, and hacking experiments</p>
          </div>
        </a>
      </div>
    </section>

    <hr class="soft-divider" aria-hidden="true">

    <!-- What I Use -->
    <section class="what-i-use">
      <div class="what-i-use-panel">
        <h2>What I Use</h2>
        <p class="what-i-use-subtitle">A handpicked mix of tools, platforms, and frameworks I enjoy using to build real-world projects.</p>
        <div class="tool-chips" role="list">
          <span class="tool-chip" role="listitem"><i class="fa-brands fa-python" aria-hidden="true"></i> Python</span>
          <span class="tool-chip" role="listitem"><i class="fa-solid fa-code" aria-hidden="true"></i> C</span>
          <span class="tool-chip" role="listitem"><i class="fa-solid fa-code" aria-hidden="true"></i> C++</span>
          <span class="tool-chip" role="listitem"><i class="fa-solid fa-database" aria-hidden="true"></i> SQL</span>
          <span class="tool-chip" role="listitem"><i class="fa-brands fa-js" aria-hidden="true"></i> JavaScript</span>
          <span class="tool-chip" role="listitem"><i class="fa-solid fa-terminal" aria-hidden="true"></i> Bash</span>
          <span class="tool-chip" role="listitem"><i class="fa-solid fa-microchip" aria-hidden="true"></i> Assembly</span>
          <span class="tool-chip" role="listitem"><i class="fa-brands fa-php" aria-hidden="true"></i> PHP</span>
          <span class="tool-chip" role="listitem"><img src="images/technology/ida.png" alt="IDA Pro" class="tool-icon"> IDA Pro</span>
          <span class="tool-chip" role="listitem"><img src="images/technology/ghidra.png" alt="Ghidra" class="tool-icon"> Ghidra</span>
          <span class="tool-chip" role="listitem"><img src="images/technology/r2.svg" alt="Radare2" class="tool-icon"> Radare2</span>
          <span class="tool-chip" role="listitem"><img src="images/technology/binary ninja.png" alt="Binary Ninja" class="tool-icon"> Binary Ninja</span>
          <span class="tool-chip" role="listitem"><img src="images/technology/burpsuite.svg" alt="BurpSuite" class="tool-icon"> BurpSuite</span>
          <span class="tool-chip" role="listitem"><img src="images/technology/git.png" alt="Git" class="tool-icon"> Git</span>
          <span class="tool-chip" role="listitem"><i class="fa-regular fa-window-maximize" aria-hidden="true"></i> Browsers</span>
        </div>
        <p class="what-i-use-footer">I have worked as a pentester for over four years and actively participate in CTFs, so my toolkit includes many tools that I know well, even if I don‚Äôt use them on a daily basis.</p>
      </div>
    </section>

    <section id="projects" class="projects-section">
      <h2>Featured Projects</h2>
      <div class="projects-dashboard" id="projects-dashboard" aria-label="Projects overview"></div>
      <div class="projects-grid" id="projects-container">
        <!-- Projects will be loaded here dynamically -->
      </div>
      <div class="projects-pagination" id="projects-pagination" aria-label="Projects pagination"></div>
    </section>

    <!-- GitHub Contributions -->
    <section class="github-contributions">
      <h2>GitHub Contribution Graph</h2>
      <img src="https://ghchart.rshah.org/navidnaf" alt="GitHub contribution graph" class="contribution-graph">
      <p class="contribution-stats" id="contribution-text">Loading contribution data...</p>
    </section>

    <!-- Technology Proficiency removed -->

</main>

<footer class="site-footer">
  <div class="container footer-grid">
    <p> <span id="year"></span> Navid Naf</p>
    <nav aria-label="Footer">
      <a href="#research-interests">Research</a>
      <a href="#education">Education</a>
      <a href="#awards">Work</a>
      <a href="#news">Explore More</a>
    </nav>
    <script>
      // IMMEDIATE TEST - This should appear in console immediately
      console.log('üéØ JavaScript file loaded at:', new Date().toISOString());
      console.log('üìÇ Script location:', document.currentScript?.src || 'inline script');

      // Pagination + dashboard config
      const PROJECTS_PER_PAGE = 5;
      let currentPage = 1;
      let allProjects = [];
      let totalPublicRepos = null;

      // Fetch and display projects from Google Sheets CSV
      async function loadProjects() {
        const csvUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSPmoxPCzmPIZGshC4b9wVQDjoadx4SeyVv24qhDf6CPzjwMDLawGRcKgR3gUYbp4gXEKIr6TRshRCN/pub?gid=0&single=true&output=csv';
        const container = document.getElementById('projects-container');
        const pagination = document.getElementById('projects-pagination');
        const dashboard = document.getElementById('projects-dashboard');

        console.log('üîç Starting to load projects from:', csvUrl);
        console.log('üìã Make sure your Google Sheet is published to web and accessible');

        try {
          console.log('üåê Attempting to fetch CSV data...');
          const response = await fetch(csvUrl, {
            mode: 'cors',
            headers: {
              'Accept': 'text/csv,application/csv,text/plain,*/*'
            }
          });

          console.log('üìä Response status:', response.status);
          console.log('üìã Response type:', response.type);
          console.log('‚úÖ Response ok:', response.ok);

          if (!response.ok) {
            throw new Error(`HTTP ${response.status}: ${response.statusText}`);
          }

          const csvText = await response.text();
          console.log('üìÑ CSV text length:', csvText.length);
          console.log('üìù First 500 characters of CSV:');
          console.log(csvText.substring(0, 500));

          // Parse CSV with better handling
          const projects = parseCSV(csvText);
          console.log('üîç Parsed projects array length:', projects.length);

          if (projects.length === 0) {
            throw new Error('CSV appears to be empty or unparseable');
          }

          const headers = projects[0];
          console.log('üè∑Ô∏è CSV Headers:', headers);

          const dataRows = projects.slice(1).filter(row => row.length > 1 && row[0] && row[0].trim());
          console.log('üìã Data rows after filtering:', dataRows.length);
          console.log('üìä Sample data row:', dataRows[0]);

          if (dataRows.length === 0) {
            console.log('‚ö†Ô∏è No valid data rows found - checking CSV format...');
            container.innerHTML = `
              <div style="text-align: center; color: var(--gray-500); padding: 2rem;">
                <p><strong>No valid project data found</strong></p>
                <p style="font-size: 0.9rem; margin-top: 1rem;">
                  Expected format: Title | Languages | Description | Repository URL<br>
                  Example: "My Project" | "Python;JavaScript" | "Project description" | "https://github.com/user/repo"
                </p>
              </div>
            `;
            pagination.innerHTML = '';
            dashboard.innerHTML = '';
            return;
          }

          console.log('üèóÔ∏è Creating project tiles for', dataRows.length, 'projects');
          allProjects = dataRows;
          currentPage = 1;
          renderDashboard(dataRows);
          renderProjectsPage();

          console.log('üéâ Project loading completed successfully!');

        } catch (error) {
          console.error('üí• Error loading projects:', error);
          console.error('üîç Error details:', {
            message: error.message,
            stack: error.stack,
            name: error.name,
            url: csvUrl
          });

          // Show detailed error message
          container.innerHTML = `
            <div style="text-align: center; color: var(--gray-500); padding: 2rem; background: rgba(255,255,255,0.8); border-radius: 1rem; margin: 1rem;">
              <h3 style="color: var(--gray-700); margin-bottom: 1rem;">Unable to Load Projects</h3>
              <p style="margin-bottom: 1rem;"><strong>Error:</strong> ${error.message}</p>
              <p style="font-size: 0.9rem; margin-bottom: 1rem;">
                <strong>Possible solutions:</strong><br>
                ‚Ä¢ Check if Google Sheet is published to web<br>
                ‚Ä¢ Verify the sheet contains data<br>
                ‚Ä¢ Ensure correct CSV format
              </p>
              <p style="font-size: 0.8rem; color: var(--gray-500);">
                Check browser console for detailed logs
              </p>
            </div>
          `;
          pagination.innerHTML = '';
          dashboard.innerHTML = '';

          // Load sample projects as fallback
          console.log('üîÑ Loading sample projects as fallback...');
          loadSampleProjects();
        }
      }

      // Load sample projects as fallback
      function loadSampleProjects() {
        const container = document.getElementById('projects-container');
        const pagination = document.getElementById('projects-pagination');
        const dashboard = document.getElementById('projects-dashboard');
        const sampleProjects = [
          {
            title: 'Python Security Toolkit',
            languages: ['Python', 'Security'],
            description: 'A comprehensive security analysis toolkit for vulnerability assessment and penetration testing.',
            githubUrl: 'https://github.com/navidnaf/security-toolkit'
          },
          {
            title: 'C++ System Monitor',
            languages: ['C++', 'System'],
            description: 'Real-time system monitoring application with performance metrics and resource tracking.',
            githubUrl: 'https://github.com/navidnaf/system-monitor'
          },
          {
            title: 'JavaScript Data Visualizer',
            languages: ['JavaScript', 'React'],
            description: 'Interactive data visualization dashboard for analytics and reporting.',
            githubUrl: 'https://github.com/navidnaf/data-viz'
          }
        ];

        const langIconClass = (lang) => {
          const key = String(lang || '').toLowerCase();
          const map = {
            'python': 'fa-brands fa-python',
            'javascript': 'fa-brands fa-js',
            'js': 'fa-brands fa-js',
            'c': 'fa-solid fa-code',
            'c++': 'fa-solid fa-code',
            'cpp': 'fa-solid fa-code',
            'sql': 'fa-solid fa-database',
            'bash': 'fa-solid fa-terminal',
            'assembly': 'fa-solid fa-microchip',
            'php': 'fa-brands fa-php',
            'security': 'fa-solid fa-shield-halved',
            'react': 'fa-brands fa-react',
            'system': 'fa-solid fa-microchip'
          };
          return map[key] || 'fa-solid fa-tag';
        };

        const normalized = sampleProjects.map(p => [p.title, p.languages.join(';'), p.description, p.githubUrl]);
        allProjects = normalized;
        currentPage = 1;
        renderDashboard(normalized);
        renderProjectsPage();
      }

      function parseCSV(csvText) {
        const lines = csvText.split('\n');
        const result = [];

        for (let i = 0; i < lines.length; i++) {
          const line = lines[i].trim();
          if (line === '') continue; // Skip empty lines

          const row = [];
          let current = '';
          let inQuotes = false;
          let j = 0;

          while (j < line.length) {
            const char = line[j];
            const nextChar = line[j + 1];

            if (char === '"') {
              if (inQuotes && nextChar === '"') {
                // Escaped quote
                current += '"';
                j += 2;
              } else {
                // Toggle quote state
                inQuotes = !inQuotes;
                j++;
              }
            } else if (char === ',' && !inQuotes) {
              // Field separator
              row.push(current.trim());
              current = '';
              j++;
            } else {
              current += char;
              j++;
            }
          }

          // Add the last field
          row.push(current.trim());
          result.push(row);
        }

        return result;
      }

      function createProjectTile(project, headers) {
        const tile = document.createElement('div');
        tile.className = 'project-tile';

        // Extract data from CSV row with corrected column order
        const title = (project[0] && project[0].trim()) ? project[0].trim() : 'Untitled Project';
        const languagesText = (project[1] && project[1].trim()) ? project[1].trim() : '';
        const description = (project[2] && project[2].trim()) ? project[2].trim() : 'No description available';
        const githubUrl = (project[3] && project[3].trim()) ? project[3].trim() : '';

        // Split languages by semicolon and filter out empty values
        const languages = languagesText ? languagesText.split(';').map(lang => lang.trim()).filter(lang => lang.length > 0) : [];

        // Validate GitHub URL format and ensure it's a complete URL
        const validGithubUrl = githubUrl
          ? (githubUrl.startsWith('http') ? githubUrl : (githubUrl.startsWith('github.com') ? `https://${githubUrl}` : ''))
          : '';

        // Debug logging
        console.log('Project data:', { title, languages, description, githubUrl });

        const langIconClass = (lang) => {
          const key = String(lang || '').toLowerCase();
          const map = {
            'python': 'fa-brands fa-python',
            'javascript': 'fa-brands fa-js',
            'js': 'fa-brands fa-js',
            'c': 'fa-solid fa-code',
            'c++': 'fa-solid fa-code',
            'cpp': 'fa-solid fa-code',
            'sql': 'fa-solid fa-database',
            'bash': 'fa-solid fa-terminal',
            'assembly': 'fa-solid fa-microchip',
            'php': 'fa-brands fa-php',
            'security': 'fa-solid fa-shield-halved',
            'react': 'fa-brands fa-react',
            'system': 'fa-solid fa-microchip'
          };
          return map[key] || 'fa-solid fa-tag';
        };

        tile.innerHTML = `
          <div class="project-row">
            <div class="project-main">
              <h3 class="project-title">${title}</h3>
              <p class="project-description">${description}</p>
              <div class="project-meta">
                ${languages.map(lang => `<span class="project-lang"><i class="${langIconClass(lang)}" aria-hidden="true"></i> ${lang}</span>`).join('')}
              </div>
            </div>
            <div class="project-actions">
              ${validGithubUrl ? `
                <a href="${validGithubUrl}" class="project-github-link" target="_blank" rel="noopener noreferrer" aria-label="View ${title} on GitHub">
                  <i class="fa-brands fa-github" aria-hidden="true"></i>
                </a>
              ` : ''}
            </div>
          </div>
        `;

        return tile;
      }

      function renderProjectsPage() {
        const container = document.getElementById('projects-container');
        const pagination = document.getElementById('projects-pagination');
        container.innerHTML = '';

        const total = allProjects.length;
        const totalPages = Math.max(1, Math.ceil(total / PROJECTS_PER_PAGE));
        if (currentPage > totalPages) currentPage = totalPages;
        const start = (currentPage - 1) * PROJECTS_PER_PAGE;
        const pageItems = allProjects.slice(start, start + PROJECTS_PER_PAGE);

        pageItems.forEach((project, index) => {
          try {
            const projectTile = createProjectTile(project, []);
            container.appendChild(projectTile);
          } catch (tileError) {
            console.error(`‚ùå Error creating tile ${index + 1}:`, tileError, 'Data:', project);
          }
        });

        pagination.innerHTML = '';
        if (totalPages > 1) {
          const prev = document.createElement('button');
          prev.className = 'page-btn';
          prev.textContent = 'Prev';
          prev.disabled = currentPage === 1;
          prev.addEventListener('click', () => {
            if (currentPage > 1) {
              currentPage -= 1;
              renderProjectsPage();
            }
          });

          const next = document.createElement('button');
          next.className = 'page-btn';
          next.textContent = 'Next';
          next.disabled = currentPage === totalPages;
          next.addEventListener('click', () => {
            if (currentPage < totalPages) {
              currentPage += 1;
              renderProjectsPage();
            }
          });

          const status = document.createElement('span');
          status.className = 'page-status';
          status.textContent = `Page ${currentPage} of ${totalPages}`;

          pagination.appendChild(prev);
          pagination.appendChild(status);
          pagination.appendChild(next);
        }
      }

      function renderDashboard(rows) {
        const dashboard = document.getElementById('projects-dashboard');
        if (!dashboard) return;

        const total = rows.length;
        const langCounts = new Map();
        rows.forEach(row => {
          const languagesText = (row[1] && row[1].trim()) ? row[1].trim() : '';
          const languages = languagesText ? languagesText.split(';').map(l => l.trim()).filter(Boolean) : [];
          languages.forEach(lang => {
            langCounts.set(lang, (langCounts.get(lang) || 0) + 1);
          });
        });

        const langIconClass = (lang) => {
          const key = String(lang || '').toLowerCase();
          const map = {
            'python': 'fa-brands fa-python',
            'javascript': 'fa-brands fa-js',
            'js': 'fa-brands fa-js',
            'c': 'fa-solid fa-code',
            'c++': 'fa-solid fa-code',
            'cpp': 'fa-solid fa-code',
            'sql': 'fa-solid fa-database',
            'bash': 'fa-solid fa-terminal',
            'assembly': 'fa-solid fa-microchip',
            'php': 'fa-brands fa-php',
            'security': 'fa-solid fa-shield-halved',
            'react': 'fa-brands fa-react',
            'system': 'fa-solid fa-microchip'
          };
          return map[key] || 'fa-solid fa-tag';
        };

        const topLangs = Array.from(langCounts.entries())
          .sort((a, b) => b[1] - a[1])
          .slice(0, 4);
        const totalLangCount = Array.from(langCounts.values()).reduce((sum, v) => sum + v, 0) || 1;
        const topSum = topLangs.reduce((sum, [, count]) => sum + count, 0);
        const otherCount = totalLangCount - topSum;
        if (otherCount > 0) {
          topLangs.push(['Other', otherCount]);
        }
        const palette = ['#7c5cff', '#f59e0b', '#ec4899', '#22c55e', '#60a5fa'];
        const chartBars = topLangs.map(([lang, count], idx) => {
          const pct = Math.round((count / totalLangCount) * 1000) / 10;
          const color = palette[idx % palette.length];
          return { lang, count, pct, color };
        });

        dashboard.innerHTML = `
          <div class="dashboard-stack">
            <div class="dashboard-card">
              <div class="dashboard-label">Total Projects</div>
              <div class="dashboard-value">${total}</div>
              <img src="images/icons/project.png" alt="" class="dashboard-icon" aria-hidden="true">
            </div>
            <div class="dashboard-card dashboard-repos">
              <div class="dashboard-label">Total Public Repos</div>
              <div class="dashboard-value">${totalPublicRepos ?? '‚Äî'}</div>
              <img src="images/icons/repository.png" alt="" class="dashboard-icon" aria-hidden="true">
            </div>
          </div>
          <div class="dashboard-card">
            <div class="dashboard-label">Top Languages</div>
            <div class="lang-bars">
              ${chartBars.map(s => `
                <div class="lang-bar-row">
                  <div class="lang-bar-head">
                    <span class="lang-bar-name"><i class="${langIconClass(s.lang)}" aria-hidden="true"></i> ${s.lang}</span>
                    <span class="lang-bar-pct">${s.pct}%</span>
                  </div>
                  <div class="lang-bar-track">
                    <span class="lang-bar-fill" style="width:${s.pct}%; background:${s.color};"></span>
                  </div>
                </div>
              `).join('')}
            </div>
          </div>
          <div class="dashboard-card dashboard-highlight">
            <p>These are some featured projects. Get the full list in my GitHub and other sections of my website.</p>
            <a class="dashboard-link" href="https://github.com/NavidNaf" target="_blank" rel="noopener noreferrer" aria-label="View all projects on GitHub">
              <span aria-hidden="true">‚Üí</span>
            </a>
          </div>
        `;
      }

      // Load GitHub stats
      async function loadGitHubStats() {
        const username = 'navidnaf'; // Replace with your GitHub username
        const statsText = document.getElementById('contribution-text');

        try {
          // Fetch GitHub user data
          const response = await fetch(`https://api.github.com/users/${username}`);
          const userData = await response.json();

          if (userData && userData.public_repos !== undefined) {
            const repos = userData.public_repos;
            const followers = userData.followers || 0;
            const following = userData.following || 0;

            statsText.innerHTML = `${repos} public repositories ‚Ä¢ ${followers} followers ‚Ä¢ ${following} following`;
            totalPublicRepos = repos;
            renderDashboard(allProjects);
          } else {
            statsText.innerHTML = 'GitHub profile data loaded successfully';
          }
        } catch (error) {
          console.error('Error loading GitHub stats:', error);
          statsText.innerHTML = 'Active contributor across multiple programming languages and projects';
        }
      }

      // Load projects when page loads
      document.addEventListener('DOMContentLoaded', loadProjects);

      // Load GitHub contribution stats
      document.addEventListener('DOMContentLoaded', loadGitHubStats);

      // Simple test to verify JavaScript is running
      console.log('üöÄ Project page JavaScript loaded successfully!');
      console.log('üìÑ Current URL:', window.location.href);
      console.log('üïí Page load time:', new Date().toLocaleTimeString());
    </script>
  </div>
</footer>

<!-- Simple Image Viewer Overlay -->
<div id="img-viewer" class="img-viewer-overlay" hidden aria-modal="true" role="dialog" aria-label="Image viewer">
  <button class="img-viewer-close" aria-label="Close">√ó</button>
  <img class="img-viewer-img" alt="Full size preview">
  <div class="img-viewer-backdrop" aria-hidden="true"></div>
  
  <!-- Optional: click hint on desktop -->
  <span class="img-viewer-hint" aria-hidden="true">Click outside or press Esc to close</span>
  
  <!-- Blur-free, crisp scaling ensured via CSS; image will never upscale beyond viewport -->
</div>

<script src="/script.js" defer></script>
</body>
</html>
